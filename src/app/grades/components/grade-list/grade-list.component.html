<div class="grades-container">
  <h1>Jegyeim</h1>

  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Jegyek betöltése...</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <mat-icon color="warn">error</mat-icon>
    <span>{{ errorMessage }}</span>
  </div>

  <div *ngIf="!isLoading && !(grades$ | async)?.length" class="no-grades">
    <mat-icon>school</mat-icon>
    <p>Nincsenek jegyeid. A jegyek a kurzusok teljesítése után jelennek meg.</p>
  </div>

  <div class="grades-list" *ngIf="!isLoading">
    <mat-card class="grade-card" *ngFor="let grade of grades$ | async">
      <mat-card-header>
        <div mat-card-avatar class="grade-avatar">
          <mat-icon>grade</mat-icon>
        </div>
        <mat-card-title>{{ grade.course?.courseName || 'Ismeretlen kurzus' }}</mat-card-title>
        <mat-card-subtitle>{{ grade.courseCode }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="grade-value">
          <span class="grade-number">{{ grade.grade }}</span>
        </div>

        <mat-divider></mat-divider>

        <div class="course-details">
          <p *ngIf="grade.course?.teacherName">
            <mat-icon>person</mat-icon>
            <strong>Oktató:</strong> {{ grade.course?.teacherName }}
          </p>
          <p *ngIf="grade.course?.credits">
            <mat-icon>star</mat-icon>
            <strong>Kredit:</strong> {{ grade.course?.credits }}
          </p>
          <p *ngIf="grade.course?.type">
            <mat-icon>category</mat-icon>
            <strong>Típus:</strong> {{ grade.course?.type }}
          </p>
          <p>
            <mat-icon>date_range</mat-icon>
            <strong>Félév:</strong> {{ grade.semester }}
          </p>
          <p>
            <mat-icon>event</mat-icon>
            <strong>Jegy dátuma:</strong> {{ formatDate(grade.dateAwarded) }}
          </p>
        </div>

        <mat-chip-set>
          <mat-chip [ngClass]="'grade-chip-' + grade.grade" selected>{{ grade.grade }}</mat-chip>
          <mat-chip color="primary" selected>{{ grade.semester }}</mat-chip>
        </mat-chip-set>
      </mat-card-content>
    </mat-card>
  </div>
</div>
